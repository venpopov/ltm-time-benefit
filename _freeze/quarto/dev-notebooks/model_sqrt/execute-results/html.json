{
  "hash": "79fbd2fb3fe40d98f55f286dfdb1b0c2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Model with sqrt scaled strength\"\nformat: html\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(targets)\ntar_source()\ntar_load(c(exp1_data_agg, exp2_data_agg))\n```\n:::\n\n\nlet's fit the sqrt version of the model\n\n\n::: {.cell}\n\n```{.r .cell-code}\nest <- estimate_model(\n  start = paper_params(),\n  data = exp1_data_agg,\n  two_step = TRUE,\n  simplify = TRUE,\n  lambda = 0.5\n)\n\nest\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 8\n   prop prop_ltm   rate   tau  gain deviance convergence fit       \n  <dbl>    <dbl>  <dbl> <dbl> <dbl>    <dbl>       <int> <list>    \n1 0.490    0.662 0.0317 0.427  6.98     145.           0 <srl_rcl_>\n```\n\n\n:::\n\n```{.r .cell-code}\nexp1_data_agg$pred <- predict(est$fit[[1]], data = exp1_data_agg, group_by = c(\"chunk\", \"gap\"), lambda = 0.5)\n\nexp1_data_agg |>\n  ggplot(aes(x = gap, y = p_correct, color = chunk)) +\n  geom_point() +\n  geom_line() +\n  geom_line(aes(y = pred), linetype = \"dashed\") +\n  facet_wrap(~itemtype)\n```\n\n::: {.cell-output-display}\n![](model_sqrt_files/figure-html/fit_sqrt-1.png){width=672}\n:::\n:::\n\n\nexclude sp1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nest <- estimate_model(\n  start = paper_params(),\n  data = exp1_data_agg,\n  two_step = TRUE,\n  simplify = TRUE,\n  exclude_sp1 = TRUE,\n  lambda = 0.5\n)\n\nest\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 8\n    prop prop_ltm    rate   tau  gain deviance convergence fit       \n   <dbl>    <dbl>   <dbl> <dbl> <dbl>    <dbl>       <int> <list>    \n1 0.0978    0.575 0.00842 0.290  69.2     31.7           0 <srl_rcl_>\n```\n\n\n:::\n:::\n\n\npredict\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexp1_data_agg$pred <- predict(est$fit[[1]], data = exp1_data_agg, group_by = c(\"chunk\", \"gap\"), lambda = 0.5)\n\nexp1_data_agg |>\n  ggplot(aes(x = gap, y = p_correct, color = chunk)) +\n  geom_point() +\n  geom_line() +\n  geom_line(aes(y = pred), linetype = \"dashed\") +\n  facet_wrap(~itemtype)\n```\n\n::: {.cell-output-display}\n![](model_sqrt_files/figure-html/predict_sqrt-1.png){width=672}\n:::\n:::\n\n\nreplicate with different starting params\n\n\n::: {.cell}\n\n```{.r .cell-code}\nest_rep <- replicate(20, estimate_model(\n  start = start_fun(),\n  data = exp1_data_agg,\n  two_step = TRUE,\n  simplify = TRUE,\n  lambda = 0.5\n))\n```\n:::\n",
    "supporting": [
      "model_sqrt_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}