{
  "hash": "3c12ef8f6ef6ff605341d1bb2af2eb54",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Basic fits\"\nformat: html\n---\n\n\n\n\n## Overview\n\nFit the non-linear resource recovery model to the three experiments. Dashed lines are model predictions. Solid dots are the observed data and solid lines are linear regression lines.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(targets)\nlibrary(GGally)\nlibrary(kableExtra)\n# load \"R/*\" scripts and saved R objects from the targets pi\ntar_source()\ntar_load(c(exp1_data, exp2_data, exp1_data_agg, exp2_data_agg, exp3_data_agg))\nset.seed(213)\n```\n:::\n\n\n\n\n## Experiment 1\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstart <- c(prop = 0.15, prop_ltm = 0.5, rate = 0.25, gain = 30, tau = 0.12)\nest1 <- estimate_model(start, data = exp1_data_agg, exclude_sp1 = TRUE, growth = \"asy\")\nexp1_data_agg$pred <- predict(est1, exp1_data_agg, group_by = c(\"chunk\", \"gap\"), growth = \"asy\")\nexp1_data_agg |>\n  ggplot(aes(x = gap, y = p_correct, color = chunk)) +\n  geom_point() +\n  geom_line() +\n  geom_line(aes(y = pred), linetype = \"dashed\") +\n  scale_color_discrete(\"First chunk LTM?\") +\n  facet_wrap(~itemtype)\n```\n\n::: {.cell-output-display}\n![](model3_basic_fits_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n\n## Experiment 2\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nest2 <- estimate_model(est1$par, data = exp2_data_agg, exclude_sp1 = TRUE, growth = \"asy\")\nexp2_data_agg$pred <- predict(est2, exp2_data_agg, group_by = c(\"chunk\", \"gap\"), growth = \"asy\")\nexp2_data_agg |>\n  ggplot(aes(x = gap, y = p_correct, color = chunk)) +\n  geom_point() +\n  geom_line() +\n  geom_line(aes(y = pred), linetype = \"dashed\") +\n  scale_color_discrete(\"First chunk LTM?\") +\n  facet_wrap(~itemtype)\n```\n\n::: {.cell-output-display}\n![](model3_basic_fits_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n\n## Experiment 3\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nest3 <- estimate_model(est1$par, data = exp3_data_agg, exclude_sp1 = TRUE, growth = \"asy\")\nexp3_data_agg$pred <- predict(est3, exp3_data_agg, group_by = c(\"chunk\", \"gap\"), growth = \"asy\")\nexp3_data_agg |>\n  ggplot(aes(x = gap, y = p_correct, color = chunk)) +\n  geom_point(alpha = 0.5) +\n  stat_smooth(method = \"lm\", se = FALSE, linewidth = 0.5) +\n  geom_line(aes(y = pred), linetype = \"dashed\", linewidth = 1.1) +\n  scale_color_discrete(\"First chunk LTM?\") +\n  facet_wrap(~itemtype)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](model3_basic_fits_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\nparameter estimates for the three experiments:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkable(round(bind_rows(est1$par, est2$par, est3$par), 3)) %>%\n  kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> prop </th>\n   <th style=\"text-align:right;\"> prop_ltm </th>\n   <th style=\"text-align:right;\"> rate </th>\n   <th style=\"text-align:right;\"> gain </th>\n   <th style=\"text-align:right;\"> tau </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 0.112 </td>\n   <td style=\"text-align:right;\"> 0.511 </td>\n   <td style=\"text-align:right;\"> 0.121 </td>\n   <td style=\"text-align:right;\"> 95.703 </td>\n   <td style=\"text-align:right;\"> 0.095 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0.103 </td>\n   <td style=\"text-align:right;\"> 0.726 </td>\n   <td style=\"text-align:right;\"> 0.107 </td>\n   <td style=\"text-align:right;\"> 93.932 </td>\n   <td style=\"text-align:right;\"> 0.089 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0.106 </td>\n   <td style=\"text-align:right;\"> 0.754 </td>\n   <td style=\"text-align:right;\"> 0.070 </td>\n   <td style=\"text-align:right;\"> 87.741 </td>\n   <td style=\"text-align:right;\"> 0.086 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n## Summary\n\nWith the non-linear recovery model, we get rate estiates of 0.121, 0.107, 0.070 in the three experiments. \nUnlike the linear recovery rate, we cannot interpret these simply. But we can ask, given the resource recovery\nequation and these estimates, how long will it take to recover a proportion X of the resource from 0? This is equivalent to the equation\n\n$$\n1-e^{-rate \\times t} = X\n$$\n\nsolving for t gives\n\n$$\nt = -\\frac{log(1-X)}{rate}\n$$\n\nwhich we can plot:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrdata <- expand.grid(\n  X = seq(0.1, 0.9, 0.1),\n  rates = round(c(est1$par[\"rate\"], est2$par[\"rate\"], est3$par[\"rate\"]), 3)\n)\n\nrdata$time <- -log(1 - rdata$X) / rdata$rates\n\nrdata |>\n  ggplot(aes(x = X, y = time, color = factor(rates))) +\n  geom_line() +\n  scale_color_discrete(\"Rate\") +\n  labs(x = \"Proportion recovered\", y = \"Time to recover\")\n```\n\n::: {.cell-output-display}\n![](model3_basic_fits_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n\nWe see that it takes:\n\n-  2.50-4 seconds to recover 25% of the resource from 0 based on the estimates from the three experiments\n-  5-10 seconds to recover 50% of the resource from 0 \n-  12-20 seconds to recover 75% of the resource from 0.\n",
    "supporting": [
      "model3_basic_fits_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}